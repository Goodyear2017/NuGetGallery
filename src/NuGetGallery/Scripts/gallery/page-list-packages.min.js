$((function(){"use strict";const storage=window.localStorage,focusResultsColumnKey="focus_results_column";storage&&storage.getItem(focusResultsColumnKey)&&(storage.removeItem(focusResultsColumnKey),document.getElementById("results-column").focus({preventScroll:!0}));const searchForm=document.forms.search,allFrameworks=document.querySelectorAll(".framework"),allTfms=document.querySelectorAll(".tfm");for(const framework of allFrameworks)framework.addEventListener("click",clickFrameworkCheckbox);for(const tfm of allTfms)tfm.addEventListener("click",clickTfmCheckbox);function clickFrameworkCheckbox(){this.indeterminate=!1;const tfms=document.querySelectorAll("[parent="+this.id+"]");tfms.forEach(tfm=>{tfm.checked=!1})}function clickTfmCheckbox(){const framework=document.getElementById(this.getAttribute("parent")),tfms=document.querySelectorAll("[parent="+this.getAttribute("parent")+"]"),checkedCount=Array.from(tfms).reduce((accumulator,tfm)=>accumulator+(tfm.checked?1:0),0);framework.checked=!1,framework.indeterminate=0!==checkedCount}const collapsibles=document.querySelectorAll(".collapsible");for(const collapsible of collapsibles)collapsible.addEventListener("click",toggleCollapsible);const advancedSearchToggleButton=document.getElementById("advancedSearchToggleButton");advancedSearchToggleButton.addEventListener("click",toggleAdvancedSearchPanel);var resized=!1,initialScreenSize=window.innerWidth;const chevronIcon=document.getElementById("advancedSearchToggleChevron");function toggleAdvancedSearchPanel(){const filtersContent=document.getElementById("advancedSearchPanel");var computedStyle=window.getComputedStyle(filtersContent);window.innerWidth<=992&&!resized?(filtersContent.style.display="none"===computedStyle.display?"block":"none",chevronIcon.classList.toggle("ms-Icon--ChevronDown"),chevronIcon.classList.toggle("ms-Icon--ChevronUp")):window.innerWidth<=992&&initialScreenSize>992&&resized?(filtersContent.style.display="none",chevronIcon.classList.add("ms-Icon--ChevronDown"),chevronIcon.classList.remove("ms-Icon--ChevronUp")):window.innerWidth>992&&(filtersContent.style.display="block"),initialScreenSize=window.innerWidth,resized=!1}function toggleCollapsible(){var dataTab=document.getElementById(this.getAttribute("tab")+"tab"),expandButton=document.getElementById(this.getAttribute("tab")+"button");const tfmCheckboxes=dataTab.querySelectorAll("[parent="+this.getAttribute("tab")+"]");this.classList.toggle("active"),expandButton.classList.toggle("ms-Icon--ChevronDown"),expandButton.classList.toggle("ms-Icon--ChevronUp"),this.classList.contains("active")?(this.setAttribute("aria-expanded","true"),dataTab.style.display="block",dataTab.style.maxHeight=dataTab.scrollHeight+"px"):(this.setAttribute("aria-expanded","false"),dataTab.style.display="none",dataTab.style.maxHeight=0)}function submitSearchForm(){constructFilterParameter(searchForm.frameworks,allFrameworks),constructFilterParameter(searchForm.tfms,allTfms),storage&&storage.setItem(focusResultsColumnKey,!0);var frameworkFiltersSelected=!1,frameworks=document.getElementById("frameworks");frameworks.name="",allFrameworks.forEach((function(framework){framework.checked&&(frameworks.name="frameworks",frameworkFiltersSelected=!0)}));var tfms=document.getElementById("tfms");if(tfms.name="",allTfms.forEach((function(tfm){tfm.checked&&(tfms.name="tfms",frameworkFiltersSelected=!0)})),!frameworkFiltersSelected){1==searchForm.includeComputedFrameworks.value&&(searchForm.includeComputedFrameworks.name="");var frameworkFilterModeAll=document.getElementById("all-selector");frameworkFilterModeAll.checked&&(frameworkFilterModeAll.name="")}var packageTypes,allPackages=document.getElementById("packagetype").querySelector('input[value=""]');allPackages.checked&&(allPackages.name=""),searchForm.submit()}function constructFilterParameter(searchField,checkboxList){searchField.value="",checkboxList.forEach(framework=>{framework.checked&&(searchField.value+=framework.id+",")}),searchField.value=searchField.value.replace(/,+$/,"")}function initializeFrameworkAndTfmCheckboxes(){var inputFrameworkFilters=searchForm.frameworks.value.split(",").map(f=>f.trim()).filter(f=>f),inputTfmFilters=searchForm.tfms.value.split(",").map(f=>f.trim()).filter(f=>f);searchForm.frameworks.value="",searchForm.tfms.value="",inputFrameworkFilters.map(id=>document.getElementById(id)).forEach(checkbox=>checkbox.click()),inputTfmFilters.map(id=>document.getElementById(id)).forEach(checkbox=>checkbox.click()),allFrameworks.forEach(checkbox=>{checkbox.indeterminate&&document.querySelector("[tab="+checkbox.id+"]").click()})}window.addEventListener("resize",()=>{resized=!0,toggleAdvancedSearchPanel()}),searchForm&&(searchForm.sortby.addEventListener("change",e=>{searchForm.sortby.value=e.target.value,submitSearchForm()}),searchForm.addEventListener("submit",submitSearchForm),initializeFrameworkAndTfmCheckboxes()),$(".reserved-indicator").each(window.nuget.setPopovers),$(".package-warning--vulnerable").each(window.nuget.setPopovers),$(".package-warning--deprecated").each(window.nuget.setPopovers),$(".tooltip-target").each((function(){$(this).on("mouseenter focusin",(function(){$(this).find(".tooltip-wrapper").addClass("show")})),$(this).on("mouseleave focusout",(function(){$(this).find(".tooltip-wrapper").removeClass("show")}))})),$(".tfmTab li input").each((function(){$(this).on("keydown",(function(e){switch(e.key){case"ArrowDown":$(this).parent().next().length>0&&$(this).parent().next().find(".tfm").focus();break;case"ArrowUp":$(this).parent().prev().length>0&&$(this).parent().prev().find(".tfm").focus()}}))}))}));